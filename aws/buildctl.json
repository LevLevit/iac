{
    "modules": [
        {
            "module": "base-vpn",
            "action": "apply",
            "target": ["network", "iam", "ssm", "client-vpn"],
            "terraform": true,
            "ansible": true,
            "playbook": "playbook.yaml"
        },
        {
            "module": "base-vpn",
            "action": "destroy",
            "target": ["client-vpn", "ssm", "iam", "network"],
            "terraform": true,
            "ansible": false
        },
        {
            "module": "base",
            "action": "apply",
            "target": ["localhost", "network", "iam", "ssm", "bastion"],
            "terraform": true,
            "ansible": true,
            "playbook": "playbook.yaml"
        },
        {
            "module": "base",
            "action": "destroy",
            "target": ["bastion", "ssm", "iam", "network"],
            "terraform": true,
            "ansible": false
        },
        {
            "module": "syslog-forwarding", 
            "action": "apply",
            "target": ["bastion", "docker"],
            "terraform": false,
            "ansible": true,
            "playbook": "playbook-syslog.yaml" 
        },
        {
            "module": "syslog-docker", 
            "action": "apply",
            "target": ["syslog", "docker"],
            "terraform": false,
            "ansible": true,
            "playbook": "playbook-syslog-docker.yaml" 
        },
        {
            "module": "syslog-kafka", 
            "action": "apply",
            "target": ["syslog"],
            "terraform": false,
            "ansible": true,
            "playbook": "playbook-syslog-kafka.yaml" 
        },                        
        {
            "module": "lb-docker",
            "action": "apply",
            "target": ["localhost", "network", "iam", "ssm", "bastion", "alb", "docker", "ecr"], 
            "terraform": true,
            "ansible": true,
            "playbook": "playbook.yaml" 
        },
        {
            "module": "lb-docker",
            "action": "destroy",
            "target": ["ecr", "docker", "alb", "bastion", "ssm", "iam", "network"],
            "terraform": true,
            "ansible": false
        },
        {
            "module": "all",
            "action": "apply",
            "target": ["localhost", "network", "iam", "ssm", "bastion", 
                       "docker", "ecr", 
                       "syslog", "syslog-forwarding", "syslog-docker", 
                       "rds-mysql"], 
            "terraform": true,
            "ansible": true,
            "playbook": "playbook.yaml" 
        },
        {
            "module": "all",
            "action": "destroy",
            "target": ["docker", "ecr", "rds-mysql", "bastion", "syslog", "ssm", "iam", "network"],
            "terraform": true,
            "ansible": false,
            "playbook": "playbook.yaml" 
        }
    ],
    "resources" : [
        {
            "target": "bastion",
            "type": "vm"   
        },
        {
            "target": "docker",
            "type": "vm"
        },
        {
            "target": "syslog",
            "type": "vm"
        }
    ]
}