{
    "modules": [
        {
            "module": "base-vpn",
            "action": "apply",
            "target": ["network", "iam", "ssm", "client-vpn"],
            "terraform": true,
            "ansible": true,
            "playbook": "playbook.yaml"
        },
        {
            "module": "base-vpn",
            "action": "destroy",
            "target": ["client-vpn", "ssm", "iam", "network"],
            "terraform": true,
            "ansible": false
        },
        {
            "module": "base",
            "action": "apply",
            "target": ["localhost", "network", "iam", "ssm", "bastion"],
            "terraform": true,
            "ansible": true,
            "playbook": "playbook.yaml"
        },
        {
            "module": "base",
            "action": "destroy",
            "target": ["bastion", "ssm", "iam", "network"],
            "terraform": true,
            "ansible": false
        },
        {
            "module": "syslog-clients",
            "action": "apply",
            "target": ["bastion", "docker"],
            "terraform": false,
            "ansible": true,
            "playbook": "playbook-syslog.yaml" 
        },
        {
            "module": "lb",
            "action": "apply",
            "target": ["localhost", "network", "iam", "ssm", "bastion", "docker", "alb"], 
            "terraform": true,
            "ansible": true,
            "playbook": "playbook.yaml" 
        },
        {
            "module": "lb",
            "action": "destroy",
            "target": ["alb", "docker", "bastion", "ssm", "iam", "network"],
            "terraform": true,
            "ansible": false
        },
        {
            "module": "all",
            "action": "apply",
            "target": ["localhost", "network", "iam", "ssm", "bastion", "docker", "ecr", "syslog", "rds-mysql"], 
            "terraform": true,
            "ansible": true,
            "playbook": "playbook.yaml" 
        },
        {
            "module": "all",
            "action": "destroy",
            "target": ["docker", "ecr", "rds-mysql", "bastion", "syslog", "ssm", "iam", "network"],
            "terraform": true,
            "ansible": false,
            "playbook": "playbook.yaml" 
        }
    ],
    "resources" : [
        {
            "target": "bastion",
            "type": "vm"   
        },
        {
            "target": "docker",
            "type": "vm"
        },
        {
            "target": "syslog",
            "type": "vm"
        }
    ]
}